---
import type { AuthRequired, User } from '@/modules/auth/core/types/user';
import { institutionService } from '@/modules/dashboard/instituciones/core/services/mock-institution';
import { timeout } from '@/modules/core/lib/time';
import { InstitutionList } from './InstitutionList';

type Props = AuthRequired<User>;

const { user } = Astro.props;
const { data: institutions, error } = await institutionService().getInstitutions(user.id);
---
  {
  institutions && !error ? (
  <InstitutionList institutions={institutions} client:visible />
  ) : (
  <h2 class="text-2xl font-bold mb-4 text-red-500">Error loading institutions</h2>
  )
  }
