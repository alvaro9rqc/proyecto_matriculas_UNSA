openapi: 3.0.3
info:
    title: Goa API
    version: 0.0.1
servers:
    - url: http://localhost:80
      description: Default server for course
paths:
    /auth/google/login:
        get:
            tags:
                - Auth
            summary: Google login Auth
            description: Initiates the Google OAuth 2.0 login flow by redirecting to the Google authorization endpoint.
            operationId: Auth#Google login
            responses:
                "307":
                    description: Temporary Redirect response.
    /auth/google/logout:
        get:
            tags:
                - Auth
            summary: Google logout Auth
            description: Logs the user out by clearing the session and redirecting to the appropriate post-logout URL.
            operationId: Auth#Google logout
            responses:
                "307":
                    description: Temporary Redirect response.
    /auth/me:
        get:
            tags:
                - Auth
            summary: Me Auth
            description: Returns information about the currently authenticated user.
            operationId: Auth#Me
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AccountUser'
                            example:
                                attendeeGroupName: Pariatur fuga placeat magni nemo.
                                attendeeGroupPriority: Et eveniet deserunt iure est et recusandae.
                                email: Pariatur et ea porro illo fugit sed.
                                firstName: Nulla sunt.
                                id: Nobis dolor molestiae qui velit qui soluta.
                                lastNames: Similique iure adipisci nobis ut enim.
                                remainingNames: Fugiat corporis officia praesentium omnis consectetur.
                "401":
                    description: Unauthorized response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/AccountUser'
                            example:
                                attendeeGroupName: Repellendus iste facere alias.
                                attendeeGroupPriority: Illo soluta iure cupiditate rerum.
                                email: Corrupti neque est aut earum minima.
                                firstName: Neque exercitationem.
                                id: Asperiores quia sit inventore recusandae unde est.
                                lastNames: Adipisci cumque.
                                remainingNames: Voluptate delectus.
    /courses:
        get:
            tags:
                - course
            summary: get_all_courses course
            description: Get all courses, only admin can use this method
            operationId: course#get_all_courses
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/GetAllCoursesRequestBody'
                        example:
                            limit: 3466669028225860434
                            page: 1330338610430196549
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/Course'
                                example:
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                            example:
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                "400":
                    description: 'bad_request: Invalid request'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'un_authorized: Unauthorized access'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /courses/available:
        get:
            tags:
                - course
            summary: get_user_available_courses course
            description: Get all courses available for the user, only user can use this method
            operationId: course#get_user_available_courses
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/Course'
                                example:
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                                    - cicle_number: 1
                                      credits: 3
                                      id: "144"
                                      name: Introduction to Programming
                            example:
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  id: "144"
                                  name: Introduction to Programming
                "400":
                    description: 'bad_request: Invalid request'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'un_authorized: Unauthorized access'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /courses/upload:
        post:
            tags:
                - course
            summary: upload_all_courses course
            description: Upload all courses from data of file, only admin can use this method
            operationId: course#upload_all_courses
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UploadAllCoursesPayload'
                        example:
                            courses:
                                - cicle_number: 1
                                  credits: 3
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  name: Introduction to Programming
                                - cicle_number: 1
                                  credits: 3
                                  name: Introduction to Programming
            responses:
                "201":
                    description: Created response.
                "400":
                    description: 'bad_request: Invalid request'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "401":
                    description: 'un_authorized: Unauthorized access'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /enrollment:
        post:
            tags:
                - enrollment
            summary: enroll enrollment
            description: Enroll an attendee in a course
            operationId: enrollment#enroll
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/EnrollmentPayload'
                        example:
                            attendee_id: 480923202
                            course_id: 1669339732
                            passed: true
            responses:
                "201":
                    description: Created response.
                "400":
                    description: 'bad_request: Invalid request'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
        put:
            tags:
                - enrollment
            summary: update_enrollment enrollment
            description: Update the enrollment status of an attendee in a course
            operationId: enrollment#update_enrollment
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/UpdateEnrollmentPayload'
                        example:
                            attendee_id: 222231779
                            course_id: 676456966
                            passed: true
            responses:
                "200":
                    description: OK response.
                "404":
                    description: 'not_found: The resource was not found'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /enrollment/{attendee_id}/{course_id}:
        delete:
            tags:
                - enrollment
            summary: delete_enrollment enrollment
            description: Delete an attendee's enrollment from a course
            operationId: enrollment#delete_enrollment
            parameters:
                - name: attendee_id
                  in: path
                  description: Attendee ID
                  required: true
                  schema:
                    type: integer
                    description: Attendee ID
                    example: 1353594971
                    format: int32
                  example: 1311213151
                - name: course_id
                  in: path
                  description: Course ID
                  required: true
                  schema:
                    type: integer
                    description: Course ID
                    example: 1084817498
                    format: int32
                  example: 1648620320
            responses:
                "204":
                    description: No Content response.
                "404":
                    description: 'not_found: The resource was not found'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /enrollment/course/{course_id}/users:
        get:
            tags:
                - enrollment
            summary: list_enrolled_users enrollment
            description: List enrolled users for a specific course
            operationId: enrollment#list_enrolled_users
            parameters:
                - name: course_id
                  in: path
                  description: Course ID
                  required: true
                  schema:
                    type: integer
                    description: Course ID
                    example: 909073278
                    format: int32
                  example: 5919641
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                type: array
                                items:
                                    $ref: '#/components/schemas/EnrolledUser'
                                example:
                                    - email: eugenia_jones@howell.name
                                      first_name: Ut eius consectetur quia doloremque iusto.
                                      last_names: Reprehenderit voluptas ea accusamus repudiandae maxime.
                                      remaining_names: Eaque ut ea quo exercitationem eum adipisci.
                                    - email: eugenia_jones@howell.name
                                      first_name: Ut eius consectetur quia doloremque iusto.
                                      last_names: Reprehenderit voluptas ea accusamus repudiandae maxime.
                                      remaining_names: Eaque ut ea quo exercitationem eum adipisci.
                            example:
                                - email: eugenia_jones@howell.name
                                  first_name: Ut eius consectetur quia doloremque iusto.
                                  last_names: Reprehenderit voluptas ea accusamus repudiandae maxime.
                                  remaining_names: Eaque ut ea quo exercitationem eum adipisci.
                                - email: eugenia_jones@howell.name
                                  first_name: Ut eius consectetur quia doloremque iusto.
                                  last_names: Reprehenderit voluptas ea accusamus repudiandae maxime.
                                  remaining_names: Eaque ut ea quo exercitationem eum adipisci.
                "404":
                    description: 'not_found: Not Found response.'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
    /google/callback:
        get:
            tags:
                - Auth
            summary: GoogleCallback Auth
            description: Google OAuth callback. Creates or reuses a session and redirects to the frontend.
            operationId: Auth#GoogleCallback
            responses:
                "307":
                    description: Temporary Redirect response.
                "401":
                    description: Unauthorized response.
    /oauth/login:
        post:
            tags:
                - oauth
            summary: login oauth
            description: Login using OAuth with a specific provider
            operationId: oauth#login
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/LoginRequestBody'
                        example:
                            code: 90v
                            oauth_provider_id: 3028730909651000065
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/UserOauthInfo'
                            example:
                                oauth_provider_id: 1
                                profile_picture: https://avatars.githubusercontent.com/u/123456?v=4
                                provider_user_id: ya29.a0AfH6SM...
                "401":
                    description: 'unauthorized: Invalid or expired code'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
                "404":
                    description: 'not_found: Not registered provider'
                    content:
                        application/vnd.goa.error:
                            schema:
                                $ref: '#/components/schemas/Error'
components:
    schemas:
        AccountUser:
            type: object
            properties:
                attendeeGroupName:
                    type: string
                    description: User attendee group name
                    example: Eius illo dolores possimus eaque voluptatum odio.
                attendeeGroupPriority:
                    type: string
                    description: User attendee group priority
                    example: Ut quaerat sapiente sed.
                email:
                    type: string
                    description: User email
                    example: Soluta iste consequuntur minus voluptate qui enim.
                firstName:
                    type: string
                    description: User first name
                    example: Et aut pariatur similique dolor nisi ut.
                id:
                    type: string
                    description: Unique user ID
                    example: Magni ducimus ea iste.
                lastNames:
                    type: string
                    description: User last names
                    example: Et est autem magni id laborum.
                remainingNames:
                    type: string
                    description: User remaining names
                    example: Voluptas itaque iure minus reprehenderit voluptas.
            description: AccountUser type
            example:
                attendeeGroupName: Repellat ut et quibusdam voluptas.
                attendeeGroupPriority: Ratione ab pariatur.
                email: Sed voluptatem.
                firstName: Ut blanditiis non sint vitae non in.
                id: Sit nisi consequatur voluptatem incidunt.
                lastNames: Itaque quibusdam aut.
                remainingNames: Beatae deleniti dicta ut amet.
            required:
                - id
                - email
                - firstName
                - lastNames
                - remainingNames
                - attendeeGroupName
                - attendeeGroupPriority
        Course:
            type: object
            properties:
                cicle_number:
                    type: integer
                    description: Cicle number of the course
                    example: 1
                    format: int64
                    minimum: 1
                credits:
                    type: integer
                    description: Number of credits for the course
                    example: 3
                    format: int64
                    minimum: 1
                id:
                    type: string
                    description: Unique identifier for the course
                    example: "144"
                name:
                    type: string
                    description: Name of the course
                    example: Introduction to Programming
                    minLength: 1
                    maxLength: 128
            description: Course represents a course in the system
            example:
                cicle_number: 1
                credits: 3
                id: "144"
                name: Introduction to Programming
            required:
                - id
                - name
                - credits
                - cicle_number
        CoursePayload:
            type: object
            properties:
                cicle_number:
                    type: integer
                    description: Cicle number of the course
                    example: 1
                    format: int64
                    minimum: 1
                credits:
                    type: integer
                    description: Number of credits for the course
                    example: 3
                    format: int64
                    minimum: 1
                name:
                    type: string
                    description: Name of the course
                    example: Introduction to Programming
                    minLength: 1
                    maxLength: 128
            description: Payload for uploading a single course
            example:
                cicle_number: 1
                credits: 3
                name: Introduction to Programming
            required:
                - name
                - credits
                - cicle_number
        DeleteEnrollmentPayload:
            type: object
            properties:
                attendee_id:
                    type: integer
                    description: Attendee ID
                    example: 184914250
                    format: int32
                course_id:
                    type: integer
                    description: Course ID
                    example: 1076783044
                    format: int32
            description: Input data to delete an enrollment
            example:
                attendee_id: 788414399
                course_id: 814386302
            required:
                - attendee_id
                - course_id
        EnrolledUser:
            type: object
            properties:
                email:
                    type: string
                    description: Email address
                    example: tatum_sipes@mckenzie.org
                    format: email
                first_name:
                    type: string
                    description: First name of the user
                    example: Dolor qui.
                last_names:
                    type: string
                    description: Last names of the user
                    example: Et occaecati beatae nulla maxime.
                remaining_names:
                    type: string
                    description: Remaining names (middle names) of the user
                    example: Rerum dolorem ut maxime.
            description: Details of a user enrolled in a course
            example:
                email: lyda@schowalter.name
                first_name: Repellendus praesentium modi fugit enim natus qui.
                last_names: Fugit et velit ex ullam qui recusandae.
                remaining_names: Dolore illo qui natus.
            required:
                - first_name
                - last_names
                - email
        EnrollmentPayload:
            type: object
            properties:
                attendee_id:
                    type: integer
                    description: Attendee ID
                    example: 1528217355
                    format: int32
                course_id:
                    type: integer
                    description: Course ID
                    example: 306306776
                    format: int32
                passed:
                    type: boolean
                    description: Whether the attendee passed the course
                    example: false
            description: Input data to enroll an attendee in a course
            example:
                attendee_id: 895470153
                course_id: 1449292637
                passed: true
            required:
                - attendee_id
                - course_id
                - passed
        Error:
            type: object
            properties:
                fault:
                    type: boolean
                    description: Is the error a server-side fault?
                    example: true
                id:
                    type: string
                    description: ID is a unique identifier for this particular occurrence of the problem.
                    example: 123abc
                message:
                    type: string
                    description: Message is a human-readable explanation specific to this occurrence of the problem.
                    example: parameter 'p' must be an integer
                name:
                    type: string
                    description: Name is the name of this class of errors.
                    example: bad_request
                temporary:
                    type: boolean
                    description: Is the error temporary?
                    example: true
                timeout:
                    type: boolean
                    description: Is the error a timeout?
                    example: false
            description: Invalid request
            example:
                fault: true
                id: 123abc
                message: parameter 'p' must be an integer
                name: bad_request
                temporary: true
                timeout: true
            required:
                - name
                - id
                - message
                - temporary
                - timeout
                - fault
        GetAllCoursesRequestBody:
            type: object
            properties:
                limit:
                    type: integer
                    description: Number of items per page
                    default: 10
                    example: 3815022636455529696
                    format: int64
                    minimum: 1
                page:
                    type: integer
                    description: Page number for pagination
                    default: 1
                    example: 9129038840992139560
                    format: int64
                    minimum: 1
            example:
                limit: 2246134022935431878
                page: 4290152828008623076
            required:
                - page
                - limit
        LoginRequestBody:
            type: object
            properties:
                code:
                    type: string
                    description: OAuth code given by the provider
                    example: qow
                    minLength: 10
                oauth_provider_id:
                    type: integer
                    description: ID of the OAuth provider
                    example: 3095440499328124413
                    format: int64
                    minimum: 1
            example:
                code: zpa
                oauth_provider_id: 7326377224202952624
            required:
                - oauth_provider_id
                - code
        OAuthProvider:
            type: object
            properties:
                auth_url:
                    type: string
                    description: Provider authentication URL
                    example: https://accounts.google.com/o/oauth2/auth
                    format: uri
                id:
                    type: integer
                    description: unique identifier
                    example: 1
                    format: int64
                    minimum: 1
                name:
                    type: string
                    description: Intern provider name
                    example: google
                    minLength: 2
            description: registered provider in th system
            example:
                auth_url: https://accounts.google.com/o/oauth2/auth
                id: 1
                name: google
            required:
                - id
                - name
                - auth_url
        UpdateEnrollmentPayload:
            type: object
            properties:
                attendee_id:
                    type: integer
                    description: Attendee ID
                    example: 373260515
                    format: int32
                course_id:
                    type: integer
                    description: Course ID
                    example: 841112562
                    format: int32
                passed:
                    type: boolean
                    description: New passed status
                    example: true
            description: Input data to update the enrollment status
            example:
                attendee_id: 112351084
                course_id: 136969197
                passed: false
            required:
                - attendee_id
                - course_id
                - passed
        UploadAllCoursesPayload:
            type: object
            properties:
                courses:
                    type: array
                    items:
                        $ref: '#/components/schemas/CoursePayload'
                    example:
                        - cicle_number: 1
                          credits: 3
                          name: Introduction to Programming
                        - cicle_number: 1
                          credits: 3
                          name: Introduction to Programming
                        - cicle_number: 1
                          credits: 3
                          name: Introduction to Programming
                        - cicle_number: 1
                          credits: 3
                          name: Introduction to Programming
            description: Payload for uploading all courses
            example:
                courses:
                    - cicle_number: 1
                      credits: 3
                      name: Introduction to Programming
                    - cicle_number: 1
                      credits: 3
                      name: Introduction to Programming
                    - cicle_number: 1
                      credits: 3
                      name: Introduction to Programming
            required:
                - courses
        UserOauthInfo:
            type: object
            properties:
                oauth_provider_id:
                    type: integer
                    description: ID of the provider used
                    example: 1
                    format: int64
                    minimum: 1
                profile_picture:
                    type: string
                    description: Profile picture URL
                    example: https://avatars.githubusercontent.com/u/123456?v=4
                    format: uri
                provider_user_id:
                    type: string
                    description: Access token given by the provider
                    example: ya29.a0AfH6SM...
                    minLength: 10
            description: User information via Oauth
            example:
                oauth_provider_id: 1
                profile_picture: https://avatars.githubusercontent.com/u/123456?v=4
                provider_user_id: ya29.a0AfH6SM...
tags:
    - name: course
      description: Manage the courses to enrollements
    - name: enrollment
      description: Manages attendee enrollment in courses
    - name: oauth
      description: Oauth Authentication service
    - name: Auth
      description: Service to handle authentication and authorization
